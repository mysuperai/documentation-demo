(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{138:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return l})),r.d(t,"metadata",(function(){return i})),r.d(t,"toc",(function(){return c})),r.d(t,"default",(function(){return p}));var n=r(3),o=r(7),a=(r(0),r(204)),l={sidebar_label:"log",title:"scrapy.utils.log"},i={unversionedId:"scrapy/scrapy/utils/log",id:"scrapy/scrapy/utils/log",isDocsHomePage:!1,title:"scrapy.utils.log",description:"failure\\to\\exc\\_info",source:"@site/docs/scrapy/scrapy/utils/log.md",sourceDirName:"scrapy/scrapy/utils",slug:"/scrapy/scrapy/utils/log",permalink:"/documentation-demo/docs/scrapy/scrapy/utils/log",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/scrapy/scrapy/utils/log.md",version:"current",sidebar_label:"log",frontMatter:{sidebar_label:"log",title:"scrapy.utils.log"},sidebar:"tutorialSidebar",previous:{title:"scrapy.utils.iterators",permalink:"/documentation-demo/docs/scrapy/scrapy/utils/iterators"},next:{title:"scrapy.utils.misc",permalink:"/documentation-demo/docs/scrapy/scrapy/utils/misc"}},c=[{value:"TopLevelFormatter Objects",id:"toplevelformatter-objects",children:[]},{value:"StreamLogger Objects",id:"streamlogger-objects",children:[]},{value:"LogCounterHandler Objects",id:"logcounterhandler-objects",children:[]}],s={toc:c};function p(e){var t=e.components,r=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(n.a)({},s,r,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h4",{id:"failure_to_exc_info"},"failure","_","to","_","exc","_","info"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-python"},"failure_to_exc_info(failure)\n")),Object(a.b)("p",null,"Extract exc_info from Failure instances"),Object(a.b)("h2",{id:"toplevelformatter-objects"},"TopLevelFormatter Objects"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-python"},"class TopLevelFormatter(logging.Filter)\n")),Object(a.b)("p",null,"Keep only top level loggers","'","s name (direct children from root) from\nrecords."),Object(a.b)("p",null,"This filter will replace Scrapy loggers","'"," names with ","'","scrapy","'",". This mimics\nthe old Scrapy log behaviour and helps shortening long names."),Object(a.b)("p",null,"Since it can","'","t be set for just one logger (it won","'","t propagate for its\nchildren), it","'","s going to be set in the root handler, with a parametrized\n",Object(a.b)("inlineCode",{parentName:"p"},"loggers")," list where it should act."),Object(a.b)("h4",{id:"configure_logging"},"configure","_","logging"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-python"},"configure_logging(settings=None, install_root_handler=True)\n")),Object(a.b)("p",null,"Initialize logging defaults for Scrapy."),Object(a.b)("p",null,Object(a.b)("strong",{parentName:"p"},"Arguments"),":"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("inlineCode",{parentName:"p"},"settings"),": settings used to create and configure a handler for the\nroot logger (default: None).\n:type settings: dict, :class:",Object(a.b)("inlineCode",{parentName:"p"},"~scrapy.settings.Settings")," object or ",Object(a.b)("inlineCode",{parentName:"p"},"None"))),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("inlineCode",{parentName:"p"},"install_root_handler"),": whether to install root logging handler\n(default: True)\n:type install_root_handler: bool"))),Object(a.b)("p",null,"This function does:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Route warnings and twisted logging through Python standard logging"),Object(a.b)("li",{parentName:"ul"},"Assign DEBUG and ERROR level to Scrapy and Twisted loggers respectively"),Object(a.b)("li",{parentName:"ul"},"Route stdout to log if LOG_STDOUT setting is True")),Object(a.b)("p",null,"When ",Object(a.b)("inlineCode",{parentName:"p"},"install_root_handler")," is True (default), this function also\ncreates a handler for the root logger according to given settings\n(see :ref:",Object(a.b)("inlineCode",{parentName:"p"},"topics-logging-settings"),"). You can override default options\nusing ",Object(a.b)("inlineCode",{parentName:"p"},"settings")," argument. When ",Object(a.b)("inlineCode",{parentName:"p"},"settings")," is empty or None, defaults\nare used."),Object(a.b)("h2",{id:"streamlogger-objects"},"StreamLogger Objects"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-python"},"class StreamLogger()\n")),Object(a.b)("p",null,"Fake file-like stream object that redirects writes to a logger instance"),Object(a.b)("p",null,"Taken from:\n",Object(a.b)("a",{parentName:"p",href:"https://www.electricmonk.nl/log/2011/08/14/redirect-stdout-and-stderr-to-a-logger-in-python/"},"https://www.electricmonk.nl/log/2011/08/14/redirect-stdout-and-stderr-to-a-logger-in-python/")),Object(a.b)("h2",{id:"logcounterhandler-objects"},"LogCounterHandler Objects"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-python"},"class LogCounterHandler(logging.Handler)\n")),Object(a.b)("p",null,"Record log levels count into a crawler stats"),Object(a.b)("h4",{id:"logformatter_adapter"},"logformatter","_","adapter"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-python"},"logformatter_adapter(logkws)\n")),Object(a.b)("p",null,"Helper that takes the dictionary output from the methods in LogFormatter\nand adapts it into a tuple of positional arguments for logger.log calls,\nhandling backward compatibility as well."))}p.isMDXComponent=!0},204:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return d}));var n=r(0),o=r.n(n);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=o.a.createContext({}),p=function(e){var t=o.a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=p(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},g=o.a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),u=p(r),g=n,d=u["".concat(l,".").concat(g)]||u[g]||b[g]||a;return r?o.a.createElement(d,i(i({ref:t},s),{},{components:r})):o.a.createElement(d,i({ref:t},s))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,l=new Array(a);l[0]=g;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:n,l[1]=i;for(var s=2;s<a;s++)l[s]=r[s];return o.a.createElement.apply(null,l)}return o.a.createElement.apply(null,r)}g.displayName="MDXCreateElement"}}]);